{
    "properties": {
        "activities": [
            {
                "name": "Load_Activities",
                "type": "ExecutePipeline",
                "dependsOn": [
                    {
                        "activity": "Load_Inventory",
                        "dependencyConditions": [
                            "Completed"
                        ]
                    }
                ],
                "policy": {
                    "secureInput": false
                },
                "typeProperties": {
                    "pipeline": {
                        "referenceName": "5ec24df9-1f9c-3872-8f7c-51fd4ddaff58",
                        "type": "PipelineReference"
                    },
                    "waitOnCompletion": true,
                    "parameters": {
                        "fromDateDayAgo": {
                            "value": "@pipeline().parameters.activity_days_in_scope",
                            "type": "Expression"
                        },
                        "display_data": {
                            "value": "@pipeline().parameters.display_data",
                            "type": "Expression"
                        }
                    }
                }
            },
            {
                "name": "Load_Workspaces",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "policy": {
                    "secureInput": false
                },
                "typeProperties": {
                    "pipeline": {
                        "referenceName": "9deee8c9-72ef-35e1-8f2e-3e6099a2ea10",
                        "type": "PipelineReference"
                    },
                    "waitOnCompletion": true,
                    "parameters": {
                        "display_data": {
                            "value": "@pipeline().parameters.display_data",
                            "type": "Expression"
                        }
                    }
                }
            },
            {
                "name": "Load_Capacities",
                "description": "Load Capacities",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "policy": {
                    "secureInput": false
                },
                "typeProperties": {
                    "pipeline": {
                        "referenceName": "e6eaed45-1788-33d7-a961-c7c01cd92f56",
                        "type": "PipelineReference"
                    },
                    "waitOnCompletion": true,
                    "parameters": {
                        "display_data": {
                            "value": "@pipeline().parameters.display_data",
                            "type": "Expression"
                        }
                    }
                }
            },
            {
                "name": "Load_Capacity_Refreshables",
                "type": "ExecutePipeline",
                "dependsOn": [
                    {
                        "activity": "Load_Active_Items",
                        "dependencyConditions": [
                            "Completed"
                        ]
                    }
                ],
                "policy": {
                    "secureInput": false
                },
                "typeProperties": {
                    "pipeline": {
                        "referenceName": "06663c4f-79e5-37ad-9b69-f307e9773259",
                        "type": "PipelineReference"
                    },
                    "waitOnCompletion": true,
                    "parameters": {
                        "display_data": {
                            "value": "@pipeline().parameters.display_data",
                            "type": "Expression"
                        }
                    }
                }
            },
            {
                "name": "Load_Capacity_Metrics",
                "type": "ExecutePipeline",
                "dependsOn": [
                    {
                        "activity": "Load_Workspaces",
                        "dependencyConditions": [
                            "Completed"
                        ]
                    },
                    {
                        "activity": "Load_Capacities",
                        "dependencyConditions": [
                            "Completed"
                        ]
                    }
                ],
                "policy": {
                    "secureInput": false
                },
                "typeProperties": {
                    "pipeline": {
                        "referenceName": "21f25779-3e89-3241-a082-bc626e00ee84",
                        "type": "PipelineReference"
                    },
                    "waitOnCompletion": true,
                    "parameters": {
                        "metric_days_in_scope": {
                            "value": "@pipeline().parameters.metric_days_in_scope",
                            "type": "Expression"
                        },
                        "metric_workspace": {
                            "value": "@pipeline().parameters.metric_workspace",
                            "type": "Expression"
                        },
                        "metric_dataset": {
                            "value": "@pipeline().parameters.metric_dataset",
                            "type": "Expression"
                        },
                        "display_data": {
                            "value": "@pipeline().parameters.display_data",
                            "type": "Expression"
                        }
                    }
                }
            },
            {
                "name": "Load_Inventory",
                "type": "ExecutePipeline",
                "dependsOn": [
                    {
                        "activity": "Load_Capacity_Refreshables",
                        "dependencyConditions": [
                            "Completed"
                        ]
                    }
                ],
                "policy": {
                    "secureInput": false
                },
                "typeProperties": {
                    "pipeline": {
                        "referenceName": "187d8fd9-54e9-3721-a7c4-d1c69b66a95d",
                        "type": "PipelineReference"
                    },
                    "waitOnCompletion": true,
                    "parameters": {
                        "has_tenant_domains": {
                            "value": "@pipeline().parameters.has_tenant_domains",
                            "type": "Expression"
                        },
                        "extract_powerbi_artifacts_only": {
                            "value": "@pipeline().parameters.extract_powerbi_artifacts_only",
                            "type": "Expression"
                        },
                        "display_data": {
                            "value": "@pipeline().parameters.display_data",
                            "type": "Expression"
                        },
                        "optional_keyvault_name": {
                            "value": "@pipeline().parameters.optional_keyvault_name",
                            "type": "Expression"
                        },
                        "optional_keyvault_sp_tenantId_secret_name": {
                            "value": "@pipeline().parameters.optional_keyvault_sp_tenantId_secret_name",
                            "type": "Expression"
                        },
                        "optional_keyvault_sp_clientId_secret_name": {
                            "value": "@pipeline().parameters.optional_keyvault_sp_clientId_secret_name",
                            "type": "Expression"
                        },
                        "optional_keyvault_sp_secret_secret_name": {
                            "value": "@pipeline().parameters.optional_keyvault_sp_secret_secret_name",
                            "type": "Expression"
                        }
                    }
                }
            },
            {
                "name": "Load_Tenant_Settings",
                "type": "ExecutePipeline",
                "dependsOn": [
                    {
                        "activity": "Load_Activities",
                        "dependencyConditions": [
                            "Completed"
                        ]
                    }
                ],
                "policy": {
                    "secureInput": false
                },
                "typeProperties": {
                    "pipeline": {
                        "referenceName": "d40158d2-86dd-3b22-932b-acc73c0c0988",
                        "type": "PipelineReference"
                    },
                    "waitOnCompletion": true,
                    "parameters": {
                        "display_data": {
                            "value": "@pipeline().parameters.display_data",
                            "type": "Expression"
                        }
                    }
                }
            },
            {
                "name": "Load_Delegated_Tenant_Settings_Overrides",
                "type": "ExecutePipeline",
                "dependsOn": [
                    {
                        "activity": "Load_Tenant_Settings",
                        "dependencyConditions": [
                            "Completed"
                        ]
                    }
                ],
                "policy": {
                    "secureInput": false
                },
                "typeProperties": {
                    "pipeline": {
                        "referenceName": "6ab1b9af-8aca-3306-8b80-17a9f29f17c4",
                        "type": "PipelineReference"
                    },
                    "waitOnCompletion": true,
                    "parameters": {
                        "display_data": {
                            "value": "@pipeline().parameters.display_data",
                            "type": "Expression"
                        }
                    }
                }
            },
            {
                "name": "Load_Active_Items",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "policy": {
                    "secureInput": false
                },
                "typeProperties": {
                    "pipeline": {
                        "referenceName": "6cdf4c37-3596-3a5f-8f36-48d007c5f3c3",
                        "type": "PipelineReference"
                    },
                    "waitOnCompletion": true,
                    "parameters": {
                        "display_data": {
                            "value": "@pipeline().parameters.display_data",
                            "type": "Expression"
                        }
                    }
                }
            },
            {
                "name": "Generate_Calendar_Table",
                "type": "TridentNotebook",
                "dependsOn": [
                    {
                        "activity": "Load_Active_Items",
                        "dependencyConditions": [
                            "Completed"
                        ]
                    }
                ],
                "policy": {
                    "timeout": "0.12:00:00",
                    "retry": 0,
                    "retryIntervalInSeconds": 30,
                    "secureOutput": false,
                    "secureInput": false
                },
                "typeProperties": {
                    "notebookId": "59efca5e-6fb0-3498-9c95-3b08d99646b1",
                    "workspaceId": "4c549dba-8b1e-3019-924b-38a8cd316b30",
                    "sessionTag": "fuam"
                }
            },
            {
                "name": "Load_Git_Connections_E2E",
                "type": "ExecutePipeline",
                "dependsOn": [
                    {
                        "activity": "Load_Delegated_Tenant_Settings_Overrides",
                        "dependencyConditions": [
                            "Completed"
                        ]
                    }
                ],
                "policy": {
                    "secureInput": false
                },
                "typeProperties": {
                    "pipeline": {
                        "referenceName": "342bb2c7-64b2-30d9-a246-b010f6bbd721",
                        "type": "PipelineReference"
                    },
                    "waitOnCompletion": true,
                    "parameters": {
                        "display_data": {
                            "value": "@pipeline().parameters.display_data",
                            "type": "Expression"
                        }
                    }
                }
            }
        ],
        "parameters": {
            "has_tenant_domains": {
                "type": "bool",
                "defaultValue": false
            },
            "extract_powerbi_artifacts_only": {
                "type": "bool",
                "defaultValue": false
            },
            "metric_days_in_scope": {
                "type": "int",
                "defaultValue": 2
            },
            "metric_workspace": {
                "type": "string",
                "defaultValue": "FUAM Capacity Metrics v37"
            },
            "metric_dataset": {
                "type": "string",
                "defaultValue": "Fabric Capacity Metrics"
            },
            "activity_days_in_scope": {
                "type": "int",
                "defaultValue": 2
            },
            "display_data": {
                "type": "bool",
                "defaultValue": false
            },
            "optional_keyvault_name": {
                "type": "string",
                "defaultValue": "fuamkv"
            },
            "optional_keyvault_sp_tenantId_secret_name": {
                "type": "string"
            },
            "optional_keyvault_sp_clientId_secret_name": {
                "type": "string"
            },
            "optional_keyvault_sp_secret_secret_name": {
                "type": "string"
            }
        }
    }
}